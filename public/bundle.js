"use strict";function ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach(function(t){_defineProperty(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ChatBotApp extends React.Component{constructor(){super(),_defineProperty(this,"sendMessage",e=>{const t=new Date;this.setState({messages:[...this.state.messages,{message:e,date:t.toISOString(),user:!0}]}),this.socket.emit("QUESTION",{socket_id:this.state.socket_id,question:e})}),_defineProperty(this,"scrollToBottom",()=>{this.messagesEnd.scrollIntoView({behavior:"smooth"})}),this.state={socket_id:"",messages:[]},this.socket=null}componentDidMount(){const e=new Audio;e.src="http://localhost:8080/stairs.mp3";const t=io();t.on("connect",()=>{this.setState({socket_id:t.id}),this.socket=t,console.log("connected"),t.on("disconnect",()=>{this.setState({socket_id:""})}),t.on("ANSWER",t=>{try{e.currentTime=0}catch(e){}e.play();const{matched:s,date:a}=t;this.setState({messages:[...this.state.messages,{message:s,date:a}]})})})}render(){const e={float:"right",maxWidth:"90%",padding:"6px",marginBottom:"5px",border:"5px"};return React.createElement("div",{className:"card bg-light",style:{width:"300px",position:"fixed",bottom:0,right:"10px"}},React.createElement(Header,null),React.createElement("div",{className:"card-body"},React.createElement("div",{style:{height:"350px",overflow:"auto"}},this.state.messages&&this.state.messages.length>0?this.state.messages.map((t,s)=>React.createElement("div",{key:s},t.user?React.createElement(Left,_extends({},t,{styles:e})):React.createElement(Right,_extends({},t,{styles:e})))):null,React.createElement("div",{style:{float:"left",clear:"both"},ref:e=>{this.messagesEnd=e}}))),React.createElement(FooterForm,{sendMessage:this.sendMessage}))}}const Header=()=>React.createElement("div",{className:"card-header"},React.createElement("img",{alt:"user",style:{width:"30px"},src:"https://img.icons8.com/nolan/64/chatbot.png"}),React.createElement("span",null," ChatBot")),Left=({message:e,date:t,styles:s})=>React.createElement("div",{style:s,className:"card bg-light"},React.createElement("span",{style:{fontSize:"14px"}},e),React.createElement("small",{style:{fontSize:"11px"}},t)),Right=({message:e,date:t,styles:s})=>React.createElement("div",{style:_objectSpread(_objectSpread({},s),{},{float:"left",color:"#fff"}),className:"card bg-primary"},React.createElement("span",{style:{fontSize:"14px"}},e),React.createElement("small",{style:{fontSize:"11px"}},t)),FooterForm=({sendMessage:e})=>{const[t,s]=React.useState("");return React.createElement("form",{className:"card-footer",onSubmit:a=>{a.preventDefault(),e(t),s("")},method:"post"},React.createElement("div",{className:"form-inline"},React.createElement("input",{type:"text",className:"form-control",required:!0,placeholder:"enter something here...",onChange:e=>s(e.target.value),value:t,style:{width:"76%"}}),React.createElement("input",{type:"submit",className:"btn btn-primary",value:"Send"})))};ReactDOM.render(React.createElement(ChatBotApp,null),document.getElementById("root"));
